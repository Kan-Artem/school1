{"version":3,"sources":["./src/app/plugins/texts-manager/text-editing/text-editing.component.html","./src/app/plugins/texts-manager/text-editing/text-editing.component.css","./src/app/plugins/texts-manager/text-editing/text-editing.component.ts","./src/app/plugins/texts-manager/texts-manager-routing.module.ts","./src/app/plugins/texts-manager/texts-manager.module.ts"],"names":[],"mappings":"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","file":"plugins-texts-manager-texts-manager-module.js","sourcesContent":["export default \"<div class=\\\"wrapper\\\">\\n  <select\\n    (change)=\\\"selectText($event.target.value)\\\"\\n    name=\\\"name\\\"\\n  >\\n    <option\\n     *ngFor=\\\"let meta of textsMeta\\\"\\n     [value]=\\\"meta.name\\\"\\n    >{{ meta.title }}</option>\\n  </select>\\n  <input name=\\\"title\\\" [(ngModel)]=\\\"title\\\">\\n  <textarea name=\\\"content\\\" [(ngModel)]=\\\"content\\\"></textarea>\\n  <button (click)=\\\"submit()\\\">Изменить</button>\\n</div>\"","export default \".wrapper {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.wrapper > * {\\n  width: 100%;\\n  margin: 10px 0;\\n}\\n\\nselect,\\ninput,\\ntextarea {\\n  padding: 5px 10px;\\n}\\n\\ntextarea {\\n  min-height: 50vh;\\n}\\n\\nbutton {\\n  padding: 10px 20px;\\n  background: #8B2525;\\n  border: 1px solid red;\\n  color: #ccc;\\n  cursor: pointer;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3RleHRzLW1hbmFnZXIvdGV4dC1lZGl0aW5nL3RleHQtZWRpdGluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxjQUFjO0FBQ2hCOztBQUVBOzs7RUFHRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLHFCQUFxQjtFQUNyQixXQUFXO0VBQ1gsZUFBZTtBQUNqQiIsImZpbGUiOiIuLi90ZXh0cy1tYW5hZ2VyL3RleHQtZWRpdGluZy90ZXh0LWVkaXRpbmcuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi53cmFwcGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuLndyYXBwZXIgPiAqIHtcbiAgd2lkdGg6IDEwMCU7XG4gIG1hcmdpbjogMTBweCAwO1xufVxuXG5zZWxlY3QsXG5pbnB1dCxcbnRleHRhcmVhIHtcbiAgcGFkZGluZzogNXB4IDEwcHg7XG59XG5cbnRleHRhcmVhIHtcbiAgbWluLWhlaWdodDogNTB2aDtcbn1cblxuYnV0dG9uIHtcbiAgcGFkZGluZzogMTBweCAyMHB4O1xuICBiYWNrZ3JvdW5kOiAjOEIyNTI1O1xuICBib3JkZXI6IDFweCBzb2xpZCByZWQ7XG4gIGNvbG9yOiAjY2NjO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG4iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthService } from '../../../auth.service';\n\n@Component({\n  selector: 'app-text-editing',\n  templateUrl: './text-editing.component.html',\n  styleUrls: ['./text-editing.component.css']\n})\nexport class TextEditingComponent implements OnInit {\n  textsMeta: { name: string; title: string}[] = [];\n  private selname: string = '';\n  title: string = '';\n  content: string = '';\n\n  constructor(\n    private http: HttpClient,\n    private auth: AuthService,\n  ) { }\n\n  ngOnInit() {\n    this.getTextNames()\n      .subscribe((list: Array<any>) => {\n        this.textsMeta = list.map((el) => {\n          el['title'] = el['title_ru'];\n          delete el['title_ru'];\n          return el;\n        });\n\n        if (list[0]) {\n          this.selectText(list[0]['name']);\n        }\n      });\n  }\n\n  selectText(name) {\n    this.selname = name;\n    this.getTextContent(name)\n      .subscribe((res) => {\n        if (!res['ok']) return alert('ERROR');\n        this.title = res['title_ru'];\n        this.content = res['content_ru'];\n      });\n  }\n\n  submit() {\n    const selname = this.selname;\n    const title = this.title;\n    this.http.post('/handle.php', {\n      action: 'edittext',\n      name: selname,\n      title_ru: title,\n      content_ru: this.content,\n      key: this.auth.getKey(),\n    }).subscribe((rs) => {\n      if (rs['ok']) {\n        const textMeta = this.textsMeta.find((t) => {\n          return t.name === selname;\n        });\n\n        textMeta.title = title;\n\n        alert('[UPDATE]: Success');\n      } else {\n        alert('[UPDATE]: Fail');\n      }\n    });\n  }\n\n  getTextNames() {\n    return this.http.get(\n      '/handle.php?action=listtexts&key=' + this.auth.getKey());\n  }\n\n  getTextContent(name) {\n    return this.http.get(\n      `/handle.php?action=gettext&name=${name}&key=`\n        + this.auth.getKey());\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { TextEditingComponent } from './text-editing/text-editing.component';\n\n\nconst routes: Routes = [\n  { path: '**', component: TextEditingComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class TextsManagerRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\n\nimport { TextsManagerRoutingModule } from './texts-manager-routing.module';\nimport { TextEditingComponent } from './text-editing/text-editing.component';\n\n\n@NgModule({\n  declarations: [TextEditingComponent],\n  imports: [\n    CommonModule,\n    TextsManagerRoutingModule,\n    HttpClientModule,\n    FormsModule,\n  ]\n})\nexport class TextsManagerModule { }\n"],"sourceRoot":"webpack:///"}